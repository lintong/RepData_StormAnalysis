---
title: "RepData Storm Data Analysis"
author: "Linton Galloway"
date: "22 October 2015"
output: html_document
---


```{r setup}
knitr::opts_chunk$set(cache=TRUE)
```


```{r}
url     <- 'https://d396qusza40orc.cloudfront.net/repdata%2Fdata%2FStormData.csv.bz2'
tempf   <- tempfile()
download.file(url, tempf, method="curl")
```


```{r}
DF      <- read.csv(bzfile(tempf))
```



```{r}
require(dplyr)

# clean-up by converting to lower case
DF <- DF %>% mutate_each(funs(tolower), EVTYPE)

# use look-up table to futher align the data

# Generate an aggregate
injures_fatalities_by_evtype <- aggregate(cbind(FATALITIES, INJURIES)~EVTYPE, data=DF, sum)
injures_fatalities_by_evtype <- filter(injures_fatalities_by_evtype, FATALITIES != 0 | INJURIES != 0)
injures_fatalities_by_evtype
```